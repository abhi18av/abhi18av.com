<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link href="/manifest.json" rel="manifest"><link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon"><meta content="#ffffff" name="theme-color"><link href="/css/normalize.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet"><title>List AWS S3 bucket objects with HTTP and XML - 200ok</title><link href="/rss.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/rss+xml"><link href="/atom.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/atom+xml"><meta content="List AWS S3 bucket objects with HTTP and XML - 200ok" property="og:title"><meta content="article" property="og:type"><meta property="og:description"><meta content="https://200ok.ch/posts/2018-02-25_List_AWS_S3_bucket_with_HTTP_and_XML.html" property="og:url"><meta content="https://200ok.ch/img/logo.png" property="og:image"><meta content="summary" name="twitter:card"><meta content="@twohundredok" name="twitter:site"><meta content="List AWS S3 bucket objects with HTTP and XML - 200ok" name="twitter:title"><meta content="https://200ok.ch/img/logo.png" name="twitter:image"><meta name="twitter:description"><link href="https://200ok.ch/posts/2018-02-25_List_AWS_S3_bucket_with_HTTP_and_XML.html" rel="canonical"><link href="/css/styles/solarized-light.css" rel="stylesheet"></head><body id="blog" itemscope itemtype="http://schema.org/Blog"><div class="top-bar"><div class="top-bar-left"><top-bar-title itemprop="image"><a href="/" id="logo"><img src="/img/200ok.svg"></a></top-bar-title></div><div class="top-bar-right"><ul class="menu"><li><a href="/blog.html">Blog</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/team.html">Team</a></li><li><a href="/atom.xml" id="atom-feed"><span>&nbsp;</span>Feed</a></li></ul></div></div><main class="single-post"><div id="content"><article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting"><h3 class="headline" itemprop="headline"><a class="nunito" href="/posts/2018-02-25_List_AWS_S3_bucket_with_HTTP_and_XML.html" itemprop="url">List AWS S3 bucket objects with HTTP and XML</a></h3><div class="subheader"><p class="post-meta"><time itemprop="datePublished">2018-02-26</time> - <span itemprop="wordCount">187</span> words - <span itemprop="timeRequired">3</span> min read</p><div class="byline"><img class="author-icon" src="/img/author.svg"><section class="author" itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">Alain M. Lafon</span></section></div></div><span itemprop="image" itemscope itemtype="https://schema.org/ImageObject"><meta content="190" itemprop="height"><meta content="349" itemprop="width"><meta content="https://200ok.ch/img/logo.png" itemprop="url"></span><div><div class="article-body" itemprop="articleBody"><p>AWS S3 has a great, but little known functionality: You can request metadata about the content of the bucket in XML. This makes it a great storage space for all kinds of batch oriented applications. No need for a self-written API.</p>
<p>Requesting the metadata is easy, it’s just a <code>GET</code> request to the root of the buckets’ URL: <code>http://[bucket_name].s3.amazonaws.com/</code></p>
<p>The response will look like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml"><code class="sourceCode xml"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">&lt;ListBucketResult&gt;</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="kw">&lt;Name&gt;</span>your-bucket-name<span class="kw">&lt;/Name&gt;</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">&lt;Prefix/&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="kw">&lt;Marker/&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="kw">&lt;MaxKeys&gt;</span>1000<span class="kw">&lt;/MaxKeys&gt;</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="kw">&lt;IsTruncated&gt;</span>false<span class="kw">&lt;/IsTruncated&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="kw">&lt;Contents&gt;</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="kw">&lt;Key&gt;</span>your_filename.json<span class="kw">&lt;/Key&gt;</span></a>
<a class="sourceLine" id="cb1-9" title="9">    <span class="kw">&lt;LastModified&gt;</span>2018-02-24T21:33:05.000Z<span class="kw">&lt;/LastModified&gt;</span></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="kw">&lt;ETag&gt;</span>&quot;da3cf2b69a251d0545fb67feb7b1e7ea&quot;<span class="kw">&lt;/ETag&gt;</span></a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="kw">&lt;Size&gt;</span>5649<span class="kw">&lt;/Size&gt;</span></a>
<a class="sourceLine" id="cb1-12" title="12">    <span class="kw">&lt;StorageClass&gt;</span>STANDARD<span class="kw">&lt;/StorageClass&gt;</span></a>
<a class="sourceLine" id="cb1-13" title="13">  <span class="kw">&lt;/Contents&gt;</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="kw">&lt;/ListBucketResult&gt;</span></a></code></pre></div>
<p>The premise for this to work is that your bucket has to be configured correctly - your users will need to be able to <code>list</code> the bucket and to <code>get</code> objects from it. This is the appropriate AWS policy:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="dt">&quot;Version&quot;</span><span class="fu">:</span> <span class="st">&quot;2012-10-17&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="dt">&quot;Statement&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb2-5" title="5">      <span class="dt">&quot;Sid&quot;</span><span class="fu">:</span> <span class="st">&quot;PublicReadGetObject&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">      <span class="dt">&quot;Effect&quot;</span><span class="fu">:</span> <span class="st">&quot;Allow&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-7" title="7">      <span class="dt">&quot;Principal&quot;</span><span class="fu">:</span> <span class="st">&quot;*&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-8" title="8">      <span class="dt">&quot;Action&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb2-9" title="9">        <span class="st">&quot;s3:GetObject&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb2-10" title="10">        <span class="st">&quot;s3:ListBucket&quot;</span></a>
<a class="sourceLine" id="cb2-11" title="11">      <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb2-12" title="12">      <span class="dt">&quot;Resource&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb2-13" title="13">        <span class="st">&quot;arn:aws:s3:::{{ bucket_name }}&quot;</span><span class="ot">,</span></a>
<a class="sourceLine" id="cb2-14" title="14">        <span class="st">&quot;arn:aws:s3:::{{ bucket_name }}/*&quot;</span></a>
<a class="sourceLine" id="cb2-15" title="15">      <span class="ot">]</span></a>
<a class="sourceLine" id="cb2-16" title="16">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb2-17" title="17">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="fu">}</span></a></code></pre></div>
<p>Furthermore your bucket needs to be configured to “host a website”. This is a property that you can set in the AWS S3 console.</p>
</div><div class="tags"><img class="tag-icon" src="/img/tag.svg"><ul itemprop="keywords"><li class="category"><a href="/category/cloud.html">cloud</a></li><li class="tag"><a href="/tags/aws.html">#aws</a></li><li class="tag"><a href="/tags/s3.html">#s3</a></li></ul></div></div></article></div></main><footer><div itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><div class="name" itemprop="name">200ok GmbH</div><div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress"><a href="https://goo.gl/maps/GNAoiNF7mbL2" title="View on Google Maps"><div itemprop="streetAddress">Badenerstrasse 313</div><div><span itemprop="postalCode">8003</span> <span itemprop="addressLocality">Zürich</span></div></a></div><div itemprop="telephone">+41 76 405 05 67</div><div itemprop="email"><a href="mailto:info@200ok.ch">info@200ok.ch</a></div><img itemprop="logo" src="https://200ok.ch/img/200ok.svg"></div></footer><div class="scripts" style="{:display &quot;none&quot;}"><script src="/js/vendor/bowser.min.js"></script><script async src="/js/ie_safeguard.js"></script><script async src="/js/tour.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>tour=null</script></div></body></html>