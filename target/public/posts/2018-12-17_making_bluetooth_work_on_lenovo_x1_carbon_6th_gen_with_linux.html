<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link href="/manifest.json" rel="manifest"><link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon"><meta content="#ffffff" name="theme-color"><link href="/css/normalize.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet"><title>Making Bluetooth work on Lenovo X1 Carbon 6th gen with Linux - 200ok</title><link href="/rss.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/rss+xml"><link href="/atom.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/atom+xml"><meta content="If your bluetooth adapter doesn&apos;t work for your brand new Lenovo X1 Carbon 6th Gen under Linux, read this article." name="description"><meta content="Making Bluetooth work on Lenovo X1 Carbon 6th gen with Linux - 200ok" property="og:title"><meta content="article" property="og:type"><meta content="If your bluetooth adapter doesn&apos;t work for your brand new Lenovo X1 Carbon 6th Gen under Linux, read this article." property="og:description"><meta content="https://200ok.ch/posts/2018-12-17_making_bluetooth_work_on_lenovo_x1_carbon_6th_gen_with_linux.html" property="og:url"><meta content="https://200ok.ch/img/logo.png" property="og:image"><meta content="summary" name="twitter:card"><meta content="@twohundredok" name="twitter:site"><meta content="Making Bluetooth work on Lenovo X1 Carbon 6th gen with Linux - 200ok" name="twitter:title"><meta content="https://200ok.ch/img/logo.png" name="twitter:image"><meta content="If your bluetooth adapter doesn&apos;t work for your brand new Lenovo X1 Carbon 6th Gen under Linux, read this article." name="twitter:description"><link href="https://200ok.ch/posts/2018-12-17_making_bluetooth_work_on_lenovo_x1_carbon_6th_gen_with_linux.html" rel="canonical"><link href="/css/styles/solarized-light.css" rel="stylesheet"></head><body id="blog" itemscope itemtype="http://schema.org/Blog"><div class="top-bar"><div class="top-bar-left"><top-bar-title itemprop="image"><a href="/" id="logo"><img src="/img/200ok.svg"></a></top-bar-title></div><div class="top-bar-right"><ul class="menu"><li><a href="/blog.html">Blog</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/team.html">Team</a></li><li><a href="/atom.xml" id="atom-feed"><span>&nbsp;</span>Feed</a></li></ul></div></div><main class="single-post"><div id="content"><article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting"><h3 class="headline" itemprop="headline"><a class="nunito" href="/posts/2018-12-17_making_bluetooth_work_on_lenovo_x1_carbon_6th_gen_with_linux.html" itemprop="url">Making Bluetooth work on Lenovo X1 Carbon 6th gen with Linux</a></h3><div class="subheader"><p class="post-meta"><time itemprop="datePublished">2018-12-17</time> - <span itemprop="wordCount">287</span> words - <span itemprop="timeRequired">2</span> min read</p><div class="byline"><img class="author-icon" src="/img/author.svg"><section class="author" itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">Alain M. Lafon</span></section></div></div><span itemprop="image" itemscope itemtype="https://schema.org/ImageObject"><meta content="190" itemprop="height"><meta content="349" itemprop="width"><meta content="https://200ok.ch/img/logo.png" itemprop="url"></span><div><div class="article-body" itemprop="articleBody"><p>The Lenovo X1 Carbon 6th gen is quite a nice laptop overall. It used to have some quirks under Linux, with regards to ACPI sleep, CPU frequency and such. They have all been taken care of by BIOS upgrades, already, so just upgrade if you any issues there.</p>
<p>There was one thing that I never got properly to work: Bluetooth. The new 6th gen uses a different chipset than the older models which I saw working just fine on my colleagues machines. It turns out, that the new chipset also did work fine under old Kernels (I tested 4.9) while on newer ones (I tested 4.16 and 4.18) it’s just behaving weirdly. Sometimes it might find devices, sometimes it might pair, sometimes it might work for a couple of seconds, but mostly it will not work.</p>
<p>After some time researching the issue, because I didn’t want to run a 2 year old kernel if I didn’t have to, I found this discussion on Launchpad: https://bugs.launchpad.net/ubuntu/+source/linux-firmware/+bug/1729389</p>
<p>Turns out, the Intel developers know about the problem and it’s already fixed in some downstreams of the kernel. If it isn’t working for your Distro of choice, you can just change one setting in the kernel module. Add this one line to your <code>/etc/modprobe.d/iwlwifi.conf</code>:</p>
<pre><code>options iwlwifi bt_coex_active=0</code></pre>
<p>Create the file if it isn’t already there (it wasn’t for me on Debian Testing). Reboot and check if the <code>bt_coex</code> option is disabled:</p>
<pre><code>cat /sys/module/iwlwifi/parameters/bt_coex_active
N</code></pre>
<p>If you’re curious what the flag is about, you can read a good explanation on <a href="https://superuser.com/questions/924559/wifi-connection-troubles-solved-why-does-my-fix-work#924560">Superuser.com</a>.</p>
<p>You’re good to go now. Enjoy all the BT goodness of Audio, input devices and so forth.</p>
</div><div class="tags"><img class="tag-icon" src="/img/tag.svg"><ul itemprop="keywords"><li class="category"><a href="/category/debian.html">Debian</a></li><li class="tag"><a href="/tags/linux.html">#linux</a></li><li class="tag"><a href="/tags/bluetooth.html">#bluetooth</a></li></ul></div></div></article></div></main><footer><div itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><div class="name" itemprop="name">200ok GmbH</div><div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress"><a href="https://goo.gl/maps/GNAoiNF7mbL2" title="View on Google Maps"><div itemprop="streetAddress">Badenerstrasse 313</div><div><span itemprop="postalCode">8003</span> <span itemprop="addressLocality">Zürich</span></div></a></div><div itemprop="telephone">+41 76 405 05 67</div><div itemprop="email"><a href="mailto:info@200ok.ch">info@200ok.ch</a></div><img itemprop="logo" src="https://200ok.ch/img/200ok.svg"></div></footer><div class="scripts" style="{:display &quot;none&quot;}"><script src="/js/vendor/bowser.min.js"></script><script async src="/js/ie_safeguard.js"></script><script async src="/js/tour.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>tour=null</script></div></body></html>