<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link href="/manifest.json" rel="manifest"><link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon"><meta content="#ffffff" name="theme-color"><link href="/css/normalize.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet"><title>RiotJS and nested custom Tags within Tables - 200ok</title><link href="/rss.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/rss+xml"><link href="/atom.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/atom+xml"><meta content="RiotJS and nested custom Tags within Tables - 200ok" property="og:title"><meta content="article" property="og:type"><meta property="og:description"><meta content="https://200ok.ch/posts/riotjs-tables.html" property="og:url"><meta content="https://200ok.ch/img/logo.png" property="og:image"><meta content="summary" name="twitter:card"><meta content="@twohundredok" name="twitter:site"><meta content="RiotJS and nested custom Tags within Tables - 200ok" name="twitter:title"><meta content="https://200ok.ch/img/logo.png" name="twitter:image"><meta name="twitter:description"><link href="https://200ok.ch/posts/riotjs-tables.html" rel="canonical"><link href="/css/styles/solarized-light.css" rel="stylesheet"></head><body id="blog" itemscope itemtype="http://schema.org/Blog"><div class="top-bar"><div class="top-bar-left"><top-bar-title itemprop="image"><a href="/" id="logo"><img src="/img/200ok.svg"></a></top-bar-title></div><div class="top-bar-right"><ul class="menu"><li><a href="/blog.html">Blog</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/team.html">Team</a></li><li><a href="/atom.xml" id="atom-feed"><span>&nbsp;</span>Feed</a></li></ul></div></div><main class="single-post"><div id="content"><article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting"><h3 class="headline" itemprop="headline"><a class="nunito" href="/posts/riotjs-tables.html" itemprop="url">RiotJS and nested custom Tags within Tables</a></h3><div class="subheader"><p class="post-meta"><time itemprop="datePublished">2016-10-29</time> - <span itemprop="wordCount">311</span> words - <span itemprop="timeRequired">3</span> min read</p><div class="byline"><img class="author-icon" src="/img/author.svg"><section class="author" itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">Alain M. Lafon</span></section></div></div><span itemprop="image" itemscope itemtype="https://schema.org/ImageObject"><meta content="190" itemprop="height"><meta content="349" itemprop="width"><meta content="https://200ok.ch/img/logo.png" itemprop="url"></span><div><div class="article-body" itemprop="articleBody"><p>If you want to use <a href="http://riotjs.com">RiotJS</a> Custom Tags within a <code>&lt;table&gt;</code>, you might have stumbled upon something that looks like a bug. If you nest Custom Tags within a <code>&lt;table&gt;</code> element, they will not render within said element, but outside of it. Let me clarify with an example and how to fix it.</p>
<p>If you have code that nests elements like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">&lt;todoList&gt;</span></a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="kw">&lt;table&gt;</span></a>
<a class="sourceLine" id="cb1-3" title="3">      <span class="kw">&lt;tbody&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4">        <span class="kw">&lt;todo</span><span class="ot"> each=</span><span class="st">&quot;{ allTodos() }&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb1-5" title="5">        <span class="kw">&lt;/todo&gt;</span></a>
<a class="sourceLine" id="cb1-6" title="6">      <span class="kw">&lt;/tbody&gt;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="kw">&lt;/table&gt;</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="kw">&lt;/todoList&gt;</span></a></code></pre></div>
<p>Where <code>&lt;todo&gt;</code> is defined as a totally legit table row, you will find that the result does not look like you imagined it. If you check your browsers developer tools, you will see that the browser renders your <code>&lt;todo&gt;</code> elements unexpectedly outside the <code>&lt;table&gt;</code> element. It might look like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">&lt;todolist&gt;</span></a>
<a class="sourceLine" id="cb2-2" title="2">    <span class="kw">&lt;todo&gt;&lt;/todo&gt;</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">&lt;table&gt;</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="kw">&lt;/table&gt;</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">&lt;/todolist&gt;</span></a></code></pre></div>
<p>The reason for this phenomenon is that browsers require known HTML elements within a <code>&lt;table&gt;</code> and <code>&lt;tbody&gt;</code> elements. If anything else is issued to be rendered within, it is just ejected.</p>
<p>No worries, though! RiotJS has a proper way of handling this type of situation. Standard HTML elements can be used as Riot Tags when you use the <code>data-is</code> attribute. For the <code>&lt;todoList&gt;</code> example above, this is functional code:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">&lt;todoList&gt;</span></a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="kw">&lt;table&gt;</span></a>
<a class="sourceLine" id="cb3-3" title="3">      <span class="kw">&lt;tbody</span> <span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-4" title="4">        <span class="kw">&lt;tr</span><span class="ot"> each=</span><span class="st">&quot;{ allTodos() }&quot;</span><span class="ot"> data-is=</span><span class="st">&quot;todo&quot;</span><span class="kw">&gt;</span></a>
<a class="sourceLine" id="cb3-5" title="5">        <span class="kw">&lt;/tr&gt;</span></a>
<a class="sourceLine" id="cb3-6" title="6">      <span class="kw">&lt;/tbody&gt;</span></a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="kw">&lt;/table&gt;</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="kw">&lt;/todoList&gt;</span></a></code></pre></div>
<p>In this example, the <code>&lt;tr&gt;</code> tag is a legit HTML tag which the browser expects to be within a <code>&lt;table&gt;</code>. However, since we want to write modular composable code, we tell RiotJS to actually use the <code>&lt;todo&gt;</code> component to compose the <code>&lt;tr&gt;</code>. For completeness, this would be valid code for a <code>&lt;todo&gt;</code> component:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">&lt;todo&gt;</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">&lt;td&gt;</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;checkbox&quot;</span><span class="ot"> checked=</span><span class="st">{</span><span class="ot"> done</span> <span class="er">}</span> <span class="kw">/&gt;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    { name }</a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="kw">&lt;/td&gt;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="kw">&lt;/todo&gt;</span></a></code></pre></div>
<p>One last thing: A custom tag has to be lower-case only when used with <code>data-is</code>, otherwise Riot will not pick it up. This is likely a bug and will be fixed in a future version.</p>
</div><div class="tags"><img class="tag-icon" src="/img/tag.svg"><ul itemprop="keywords"><li class="category"><a href="/category/riotjs.html">riotjs</a></li><li class="tag"><a href="/tags/javascript.html">#javascript</a></li><li class="tag"><a href="/tags/spa.html">#spa</a></li></ul></div></div></article></div></main><footer><div itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><div class="name" itemprop="name">200ok GmbH</div><div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress"><a href="https://goo.gl/maps/GNAoiNF7mbL2" title="View on Google Maps"><div itemprop="streetAddress">Badenerstrasse 313</div><div><span itemprop="postalCode">8003</span> <span itemprop="addressLocality">ZÃ¼rich</span></div></a></div><div itemprop="telephone">+41 76 405 05 67</div><div itemprop="email"><a href="mailto:info@200ok.ch">info@200ok.ch</a></div><img itemprop="logo" src="https://200ok.ch/img/200ok.svg"></div></footer><div class="scripts" style="{:display &quot;none&quot;}"><script src="/js/vendor/bowser.min.js"></script><script async src="/js/ie_safeguard.js"></script><script async src="/js/tour.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>tour=null</script></div></body></html>