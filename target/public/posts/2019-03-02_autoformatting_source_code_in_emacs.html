<!DOCTYPE html>
<html lang="en"><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport"><link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><link href="/manifest.json" rel="manifest"><link color="#5bbad5" href="/safari-pinned-tab.svg" rel="mask-icon"><meta content="#ffffff" name="theme-color"><link href="/css/normalize.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet"><title>Autoformatting source code in Emacs - 200ok</title><link href="/rss.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/rss+xml"><link href="/atom.xml" rel="alternate" title="200ok - Consultancy, Research Lab, Incubator" type="application/atom+xml"><meta content="Autoformatting source code with prettier, eslint and Emacs." name="description"><meta content="Autoformatting source code in Emacs - 200ok" property="og:title"><meta content="article" property="og:type"><meta content="Autoformatting source code with prettier, eslint and Emacs." property="og:description"><meta content="https://200ok.ch/posts/2019-03-02_autoformatting_source_code_in_emacs.html" property="og:url"><meta content="https://200ok.ch/img/logo.png" property="og:image"><meta content="summary" name="twitter:card"><meta content="@twohundredok" name="twitter:site"><meta content="Autoformatting source code in Emacs - 200ok" name="twitter:title"><meta content="https://200ok.ch/img/logo.png" name="twitter:image"><meta content="Autoformatting source code with prettier, eslint and Emacs." name="twitter:description"><link href="https://200ok.ch/posts/2019-03-02_autoformatting_source_code_in_emacs.html" rel="canonical"><link href="/css/styles/solarized-light.css" rel="stylesheet"></head><body id="blog" itemscope itemtype="http://schema.org/Blog"><div class="top-bar"><div class="top-bar-left"><top-bar-title itemprop="image"><a href="/" id="logo"><img src="/img/200ok.svg"></a></top-bar-title></div><div class="top-bar-right"><ul class="menu"><li><a href="/blog.html">Blog</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/team.html">Team</a></li><li><a href="/atom.xml" id="atom-feed"><span>&nbsp;</span>Feed</a></li></ul></div></div><main class="single-post"><div id="content"><article class="blog-post" itemscope itemtype="https://schema.org/BlogPosting"><h3 class="headline" itemprop="headline"><a class="nunito" href="/posts/2019-03-02_autoformatting_source_code_in_emacs.html" itemprop="url">Autoformatting source code in Emacs</a></h3><div class="subheader"><p class="post-meta"><time itemprop="datePublished">2019-03-02</time> - <span itemprop="wordCount">328</span> words - <span itemprop="timeRequired">2</span> min read</p><div class="byline"><img class="author-icon" src="/img/author.svg"><section class="author" itemprop="author" itemscope itemtype="https://schema.org/Person"><span itemprop="name">Alain M. Lafon</span></section></div></div><span itemprop="image" itemscope itemtype="https://schema.org/ImageObject"><meta content="190" itemprop="height"><meta content="349" itemprop="width"><meta content="https://200ok.ch/img/logo.png" itemprop="url"></span><div><div class="article-body" itemprop="articleBody"><p>Recently at <a href="http://clojured.de/">ClojureD</a>, <a href="https://www.erben.io/">Josef</a> introduced me to a tool which quickly rose to fame (in the JavaScript world): <a href="https://prettier.io/">prettier</a>. It is an opinionated code formatter for various languages - this paradigm probably got popular ever since Go started to ship such a formatter in the core tooling. I knew the paradigm and prettier itself from blog posts, but didn’t really try to use it so far.</p>
<p>Generally speaking I liked the idea of having my code automatically formatted in Emacs whilst adhering to configured linters such as <a href="https://eslint.org/">eslint</a>. However, from the docs it was much too complicated to use. More importantly, though, the documentation asks to configure it through files which are usually checked in (like <code>package.json</code> or <code>.eslintrc.json</code>). For new or our own projects, this is fine. However, for customer projects, I don’t want to impose new tools. Additionally, it is a whole lot of repetitive work to set up such tooling for every single project which kind of defeats it’s ulterior motive. In these days, who doesn’t work on a couple dozen code bases in parallel?(;</p>
<p>Therefore, I did what every self-respecting engineer would do in this scenario: I wrote a little Elisp wrapper. This wrapper implements an interactive function <code>autoformat</code> which is a thin wrapper around command-line based code autoformatters which it utilizes through a strategy pattern. At this moment, the tools <code>prettier</code> and <code>prettier-eslint-cli</code> are implemented. With those, autoformatting a wide variety of languages/formats like JS, CSS,Sass,HTML, JSON and many more is possible. To add a new language/framework, just add a new strategy function which yields the a command-line tool that adheres to this workflow: Reads source code from <code>stdin</code>, formats it and passes it to <code>stdout</code>.</p>
<p>You can find the documented code in my Emacs repository: https://github.com/munen/emacs.d/#auto-formatting</p>
<p>If you like it, feel free to fork the repository, make pull requests or just give it a star^^</p>
<p>Happy hacking!</p>
<figure>
<img src="/img/2019/03/demo-ok-autoformat.gif" alt="Autoformat demo" /><figcaption>Autoformat demo</figcaption>
</figure>
</div><div class="tags"><img class="tag-icon" src="/img/tag.svg"><ul itemprop="keywords"><li class="category"><a href="/category/emacs.html">Emacs</a></li><li class="tag"><a href="/tags/programming.html">#programming</a></li><li class="tag"><a href="/tags/javascript.html">#javascript</a></li><li class="tag"><a href="/tags/elisp.html">#elisp</a></li><li class="tag"><a href="/tags/eslint.html">#eslint</a></li><li class="tag"><a href="/tags/prettier.html">#prettier</a></li></ul></div></div></article></div></main><footer><div itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><div class="name" itemprop="name">200ok GmbH</div><div itemprop="address" itemscope itemtype="https://schema.org/PostalAddress"><a href="https://goo.gl/maps/GNAoiNF7mbL2" title="View on Google Maps"><div itemprop="streetAddress">Badenerstrasse 313</div><div><span itemprop="postalCode">8003</span> <span itemprop="addressLocality">Zürich</span></div></a></div><div itemprop="telephone">+41 76 405 05 67</div><div itemprop="email"><a href="mailto:info@200ok.ch">info@200ok.ch</a></div><img itemprop="logo" src="https://200ok.ch/img/200ok.svg"></div></footer><div class="scripts" style="{:display &quot;none&quot;}"><script src="/js/vendor/bowser.min.js"></script><script async src="/js/ie_safeguard.js"></script><script async src="/js/tour.js"></script><script src="/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>tour=null</script></div></body></html>